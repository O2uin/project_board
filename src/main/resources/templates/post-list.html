<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판 목록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #ffffff;
            color: #262626;
            font-family: 'Pretendard', -apple-system, sans-serif;
        }

        /* 상단 헤더 */
        .header {
            padding: 20px 0;
            border-bottom: 1px solid #f1f1f1;
            margin-bottom: 50px;
        }

        .list-container { max-width: 800px; margin: 0 auto; padding: 0 20px; }

        /* 리스트 스타일: 선을 연하게 하고 여백을 늘림 */
        .table { --bs-table-border-color: #f1f1f1; }
        .table thead th {
            font-weight: 500;
            color: #888;
            font-size: 0.9rem;
            border-bottom: 2px solid #f8f9fa;
            padding: 15px 10px;
        }
        .table tbody td {
            padding: 20px 10px;
            vertical-align: middle;
            font-size: 1rem;
        }

        /* 제목 링크 디자인 */
        .post-link {
            text-decoration: none;
            color: #2c3e50;
            font-weight: 500;
            transition: 0.2s;
        }
        .post-link:hover { color: #12b886; }

        /* 메타 정보 (작성자, 날짜, 조회수) */
        .meta-text { font-size: 0.85rem; color: #999; }
        .author-badge {
            display: inline-block;
            width: 24px; height: 24px;
            background: #f1f3f5;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            font-size: 0.75rem;
            font-weight: bold;
            color: #666;
            margin-right: 5px;
        }

        /* 글쓰기 버튼 */
        .btn-write {
            background-color: #343a40;
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 6px;
            font-weight: 600;
            text-decoration: none;
            font-size: 0.9rem;
        }
        .btn-write:hover { background-color: #212529; color: white; }

        /* 회원가입 버튼 스타일만 살짝 추가 */
    .btn-signup {
        background-color: #f8f9fa;
        color: #495057;
        border: 1px solid #dee2e6;
        padding: 6px 14px;
        border-radius: 4px;
        text-decoration: none;
        font-size: 0.85rem;
        font-weight: 500;
        transition: 0.2s;
    }
    .btn-signup:hover { background-color: #e9ecef; }
    </style>
</head>
<body>

<nav class="header">
    <div class="container d-flex justify-content-between align-items-center" style="max-width: 800px;">

        <a href="/posts" class="text-decoration-none text-dark">
            <span class="fw-bold fs-5" style="letter-spacing: -1px;">My Board</span>
        </a>

        <div class="user-menu">
            <div th:if="${session.loginMember == null}" class="d-flex align-items-center gap-3">
                <a href="/login" class="text-decoration-none text-muted fw-medium" style="font-size: 0.9rem;">로그인</a>
                <a href="/members/new" class="btn-signup">회원가입</a>
            </div>

            <div th:unless="${session.loginMember == null}" class="d-flex align-items-center gap-3">
                <div class="d-flex align-items-center gap-2">
                    <div style="width: 24px; height: 24px; background: #f1f3f5; border-radius: 50%; font-size: 0.7rem; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #868e96; border: 1px solid #eee;"
                         th:text="${#strings.substring(session.loginMember.name, 0, 1)}">U</div>

                    <a th:href="@{/members/myPage}" class="text-decoration-none"
                       style="font-size: 0.9rem; transition: 0.2s;"
                       onmouseover="this.style.opacity='0.6'" onmouseout="this.style.opacity='1'">
                        <span class="fw-semibold" style="color: #333;" th:text="${session.loginMember.name}">사용자</span>
                        <span style="color: #adb5bd;">님</span>
                    </a>
                </div>

                <div style="width: 1px; height: 12px; background: #e9ecef;"></div>

                <a href="/logout" class="text-decoration-none" style="font-size: 0.85rem; color: #adb5bd; font-weight: 500; transition: 0.2s;"
                   onmouseover="this.style.color='#495057'" onmouseout="this.style.color='#adb5bd'">
                    로그아웃
                </a>
            </div>
        </div>
    </div>
</nav>

<div class="list-container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="fw-bold m-0" style="letter-spacing: -0.5px;">최신 게시글</h4>
        <a href="/posts/new" class="btn-write">새 글 작성</a>
    </div>

    <table class="table">
    </table>
</div>

<div class="list-container">
    <table class="table">
        <thead>
        <tr>
            <th style="width: 8%">번호</th>
            <th>제목</th>
            <th style="width: 15%">작성자</th>
            <th style="width: 15%">날짜</th>
            <th style="width: 10%">조회</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="post : ${posts}">
            <td class="meta-text" th:text="${post.id}">1</td>
            <td>
                <a th:href="@{/posts/detail(id=${post.id})}" class="post-link" th:text="${post.title}">게시글 제목입니다</a>
            </td>
            <td>
                <div class="d-flex align-items-center">
                    <span class="author-badge" th:text="${#strings.substring(post.author, 0, 1)}">작</span>
                    <span class="meta-text" th:text="${post.author}">작성자</span>
                </div>
            </td>
            <td class="meta-text" th:text="${#temporals.format(post.createdAt, 'MM.dd')}">01.18</td>
            <td class="meta-text" th:text="${post.viewCount}">0</td>
        </tr>
        <tr th:if="${#lists.isEmpty(posts)}">
            <td colspan="5" class="text-center py-5 text-muted">등록된 게시글이 없습니다.</td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>